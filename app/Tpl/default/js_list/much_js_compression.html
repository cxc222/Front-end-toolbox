<include file="public:header" />
<div id="mainContent" class="wrapper">
	<div class="toolName">
		{$title_name}
	</div>
	<div class="toolUsing clearfix">
		<div class="toolsTab clearfix">
			<include file="js_list:nav" />
		</div>
		<style>
			input[type="file"]{margin-left:5px;}
			.input-append, .input-prepend{font-size:13px;}
			.updata{line-height:28px;}
		</style>
		<script language="javascript" type="text/javascript" src="__ROOT__/resources/js/form/jquery.form.js"></script>
		<div class="wrapper">
			<form enctype="multipart/form-data" style="margin-top:20px;width:500px;" class="well" method="POST" action="{:U(MODULE_NAME.'/much_js_compression')}" id="upload_form">
				<div class="alert alert-info">
					{:L('up_js_note')}
				</div>
				
				<div style="margin-bottom:20px;" class="input-prepend">
					<span class="add-on">每</span><input type="text" value="5000" class="span1" size="5" name="linebreak"><span class="add-on">个{:L('byte_newline')}</span>
					<label style="margin-left:20px;" class="checkbox inline"><input type="checkbox" id="munge" name="munge">{:L('js_garble')}</label>
				</div>
				<div style="margin-bottom:15px;" class="input-prepend file_input updata">
					<span class="add-on">{:L('js_file')}:</span><input type="file" accept="application/x-javascript" name="file[]">
					<a style="margin-left:10px;display:none;" onclick="del_file(this);return false;" href="javascript:;">{:L('delete')}</a>
				</div>
				<div style="margin-bottom:15px;" class="input-prepend file_input updata">
					<span class="add-on">{:L('js_file')}:</span><input type="file" accept="application/x-javascript" name="file[]">
					<a style="margin-left:10px;" onclick="del_file(this);return false;" href="javascript:;">{:L('delete')}</a>
				</div>
				<a class="btn btn-success" onclick="add_file(this);return false;" href="javascript:;">{:L('add_file')}</a>
				<input type="submit" value="{:L('merger_compression')}" style="float:right;" class="btn btn-primary">
			</form>
		</div>
		
	</div>
	<script>
	var f_idx=2;
	function add_file(){
		var fi=$(".file_input:last").clone();
		$(".file_input:last").after(fi);
		f_idx++;
		$(".file_input:last input").attr("name","file[]");
		$(".file_input:last a").show();
		return;
	}

	function del_file(s){
		$(s).parent("div").remove();
	}
	$(document).ready(function (){
		 $("#upload_form").ajaxForm({
			 dataType:json,
			 success: function (msg){
				 msg= eval('(' + msg + ')');
				 if(msg.msg)
					 alert("错误 ： "+msg.msg);
				 }
		});
	});
	</script>
</div>
<include file="public:footer" />